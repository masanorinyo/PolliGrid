<section class="utility-section">
	<h1 hidden>search</h1>
	<a href="#" ui-sref=".create" class='btn btn-default create'>
		Create
	</a>
     <div reset="searchFocused">
		<div  class="input-group search">
			<input id="searchbox" ng-change="updateSearch()" focus-me="searchFocused" ng-model="searchQuestion" type="text" placeholder="Search..."class="form-control">
			<span class="input-group-addon">
				<i class="glyphicon glyphicon-search"></i>
			</span>
		</div>
		<div ng-if="searchFocused" id="categorybox" class="popover-searchbox">
			<i class="fa fa-sort-up"></i>
			<p class="title ">
				<span id="category-select" ng-click="showOrder=false" ng-class="{'selected':!showOrder}" class="pointer pull-left">Categories </span>
				<span id="order-select" ng-click="showOrder=true" ng-class="{'selected':showOrder}" class="pointer pull-right">Order by</span>
			</p>
			<hr class="clear">
			<div ng-show="showOrder" class="orders">
				<ul>
					<li ng-click="sortBy(order)" ng-repeat="order in orders">{{order}}</li>
				</ul>
			</div>
			<div class="categories">
				<ul>
					<li ng-click="putCategory(category)" ng-hide="showOrder" ng-repeat="category in categories">{{category}}</li>
				</ul>
			</div>
		</div>
     </div>
</section>
<section class='content-section'>
	<h1 hidden>question</h1>
	<div class="orderby gray">
		Order by - {{order}}
	</div>
	<ul id='content-cards'>
		
		<!-- show this when there are no questions -->
		<p ng-show="!filteredQuestions.length" class="noContent">
			Couldn't find anything
		</p>	

		<li  ng-repeat="question in filteredQuestions = (questions | filter:searchQuestion | orderBy:orderBy:reverse)"
		 ng-controller="ListCtrl">
			
			
			<div answered='question' submitted="submitted"  class="card card-large">
				<!-- should make a directive for this -->
				<div favorited="question" favorite="favorite" class="favorite-button" ng-click="fillStar(question)">
					<i ng-show="!favorite" class="glyphicon glyphicon-star-empty"></i>
					<i ng-show="favorite" class="glyphicon glyphicon-star"></i>
				</div>

				<div ui-sref=".share({id:question.id})" class="share-button">
					<i class="glyphicon glyphicon-share"></i>
				</div>

				<div ng-hide="submitted" class="content">
					
					<p class='question'>
						{{question.question}}
					</p>

					<!-- Warning message -->
					<p ng-show="warning" class="animated fadeIn alert alert-danger">
						Please select something
					</p>

					<form ng-submit="submitAnswer(answer,question)" id="surveyForm">
						
						<ul class="answers">
							<li ng-hide="targetQ.isQuestionAnswered" class='answer' ng-repeat='option in question.options'>
								<label class='pointer'>
									<input ng-model="$parent.answer" type="radio" name="answer" ng-value="option">
									{{option.title}}
								</label>
							</li>
						</ul>
						<input type="submit" class="submit-button btn btn-primary btn-sm" value="See result">
					</form>
				</div>


				<div ui-view='result' ng-show="submitted" class="animated question-content" ng-class="{back:submitted}"></div>


				<div class="card-bottom">
					<ul>
						<li class='userPhoto'>
							<a href="#">
								<img ng-src="{{question.photo}}" alt="{{question.creatorName}}">
							</a>
						</li>
						<li class='category silver'>
							category: 
							<span ng-click="searchByCategory(question.category)" class='name gray'>
								{{question.category}}
							</span>
						</li>
					</ul>
				</div>

			</div>
		</li>

	</ul>

	<!-- should make a directive for this -->
	<div id="loader">
		<div class="loaderWrapper">
			<img src="/img/utility/loader.gif" alt="loading">
		</div>
	</div>
</section>
